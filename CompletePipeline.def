Bootstrap: docker
From: staphb/minimap2:latest

%post
	apt-get update
	apt install -y python3
	apt install -y python3-pip
	apt install -y curl
	pip install igraph==0.10.4
	pip install numpy==1.23.5
	pip install networkx==2.8
	apt-get install -y git
	cd $SINGULARITY_ROOTFS/
	git clone https://github.com/MargheritaCavattoni/ClassGraph2.git
	git clone https://github.com/DerrickWood/kraken2.git
	mkdir $SINGULARITY_ROOTFS/PipelineData
	mkdir $SINGULARITY_ROOTFS/kraken2_installation
	cd $SINGULARITY_ROOTFS/kraken2
	./install_kraken2.sh $SINGULARITY_ROOTFS/kraken2_installation
	
%environment
	export PATH="$PATH:/kraken2_installation/kraken2"
	export PATH="$PATH:/kraken2_installation/kraken2-build"
	export PATH="$PATH:/kraken2_installation/kraken2-inspect"
	
%files
	/home/margherita/Scrivania/Dottorato/ClassGraph-EstensioneArticolo/scripts/paftk $SINGULARITY_ROOTFS/paftk

%runscript
	python3 $SINGULARITY_ROOTFS/ClassGraph2/ClassGraph2.py $*

%labels
	Author Margherita Cavattoni
	Version 1.0

%help
	This a Singularity container based on Debian 11 and it contains a python program available in the /ClassGraph2/ folder. When executed with singularity run, the container will execute ClassGraph2: you will have to provide the input parameters.
